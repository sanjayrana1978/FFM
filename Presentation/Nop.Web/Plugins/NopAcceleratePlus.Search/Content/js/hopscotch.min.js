(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.hopscotch=t()})(this,function(){"use strict";var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},y,s,p,w,h,c,a,l="bubble_default",b=window.Sizzle||null,n,e,f,k,u,t,r="undefined",d=!1,g=(typeof jQuery=="undefined"?"undefined":i(jQuery))!==r,o=!1,v=!1,nt=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,tt={left:"right",right:"left"};try{i(window.sessionStorage)!==r&&(o=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),v=!0)}catch(it){}return u={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,isRtl:!1,cookieName:"hopscotch.tour.state"},Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"}),k=function(){d&&t.startTour()},n={addClass:function(n,t){var r,u,i,f;if(n.className){for(u=t.split(/\s+/),r=" "+n.className+" ",i=0,f=u.length;i<f;++i)r.indexOf(" "+u[i]+" ")<0&&(r+=u[i]+" ");n.className=r.replace(/^\s+|\s+$/g,"")}else n.className=t},removeClass:function(n,t){var i,u,r,f;for(u=t.split(/\s+/),i=" "+n.className+" ",r=0,f=u.length;r<f;++r)i=i.replace(" "+u[r]+" "," ");n.className=i.replace(/^\s+|\s+$/g,"")},hasClass:function(n,t){var i;return n.className?(i=" "+n.className+" ",i.indexOf(" "+t+" ")!==-1):!1},getPixelValue:function(n){var t=typeof n=="undefined"?"undefined":i(n);return t==="number"?n:t==="string"?parseInt(n,10):0},valOrDefault:function(n,t){return(typeof n=="undefined"?"undefined":i(n))!==r?n:t},invokeCallbackArrayHelper:function(n){var t;if(Array.isArray(n)&&(t=f[n[0]],typeof t=="function"))return t.apply(this,n.slice(1))},invokeCallbackArray:function(t){var i,r;if(Array.isArray(t)){if(typeof t[0]=="string")return n.invokeCallbackArrayHelper(t);for(i=0,r=t.length;i<r;++i)n.invokeCallback(t[i])}},invokeCallback:function(t){return typeof t=="function"?t():typeof t=="string"&&f[t]?f[t]():n.invokeCallbackArray(t)},invokeEventCallbacks:function(n,t){var r=e[n],i,u;if(t)return this.invokeCallback(t);for(i=0,u=r.length;i<u;++i)this.invokeCallback(r[i].cb)},getScrollTop:function(){return i(window.pageYOffset)!==r?window.pageYOffset:document.documentElement.scrollTop},getScrollLeft:function(){return i(window.pageXOffset)!==r?window.pageXOffset:document.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight},addEvtListener:function(n,t,i){if(n)return n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent("on"+t,i)},removeEvtListener:function(n,t,i){if(n)return n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent("on"+t,i)},documentIsReady:function(){return document.readyState==="complete"},evtPreventDefault:function(n){n.preventDefault?n.preventDefault():event&&(event.returnValue=!1)},extend:function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},getStepTargetHelper:function(n){var t=document.getElementById(n);if(t)return t;if(g)return t=jQuery(n),t.length?t[0]:null;if(b)return t=new b(n),t.length?t[0]:null;if(document.querySelector)try{return document.querySelector(n)}catch(i){}return/^#[a-zA-Z][\w-_:.]*$/.test(n)?document.getElementById(n.substring(1)):null},getStepTarget:function(t){var r,i,u;if(!t||!t.target)return null;if(typeof t.target=="string")return n.getStepTargetHelper(t.target);if(Array.isArray(t.target)){for(i=0,u=t.target.length;i<u;i++)if(typeof t.target[i]=="string"&&(r=n.getStepTargetHelper(t.target[i]),r))return r;return null}return t.target},getI18NString:function(n){return h[n]||w[n]},setState:function(n,t,i){var u="",r;if(o&&v)try{sessionStorage.setItem(n,t)}catch(f){v=!1;this.setState(n,t,i)}else o&&sessionStorage.removeItem(n),i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString()),document.cookie=n+"="+t+u+"; path=/"},getState:function(n){var u=n+"=",f=document.cookie.split(";"),r,t,i;if(o&&(i=sessionStorage.getItem(n),i))return i;for(r=0;r<f.length;r++){for(t=f[r];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(u)===0){i=t.substring(u.length,t.length);break}}return i},clearState:function(n){o?sessionStorage.removeItem(n):this.setState(n,"",-1)},normalizePlacement:function(n){!n.placement&&n.orientation&&(n.placement=n.orientation)},flipPlacement:function(n){if(n.isRtl&&!n._isFlipped){var i=["orientation","placement"],t,r;n.xOffset&&(n.xOffset=-1*this.getPixelValue(n.xOffset));for(r in i)t=i[r],n.hasOwnProperty(t)&&tt.hasOwnProperty(n[t])&&(n[t]=tt[n[t]]);n._isFlipped=!0}}},n.addEvtListener(window,"load",k),e={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},f={},w={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},h={},s=function(n){this.init(n)},s.prototype={isShowing:!1,currStep:undefined,setPosition:function(t){var h,s,i,r,u,e,c,l=n.getStepTarget(t),o=this.element,f=this.arrowEl,a=t.isRtl?"right":"left";if(n.flipPlacement(t),n.normalizePlacement(t),s=o.offsetWidth,h=o.offsetHeight,n.removeClass(o,"fade-in-down fade-in-up fade-in-left fade-in-right"),i=l.getBoundingClientRect(),c=t.isRtl?i.right-s:i.left,t.placement==="top")r=i.top-h-this.opt.arrowWidth,u=c;else if(t.placement==="bottom")r=i.bottom+this.opt.arrowWidth,u=c;else if(t.placement==="left")r=i.top,u=i.left-s-this.opt.arrowWidth;else if(t.placement==="right")r=i.top,u=i.right+this.opt.arrowWidth;else throw new Error("Bubble placement failed because step.placement is invalid or undefined!");e=t.arrowOffset!=="center"?n.getPixelValue(t.arrowOffset):t.arrowOffset;e?t.placement==="top"||t.placement==="bottom"?(f.style.top="",f.style[a]=e==="center"?Math.floor(s/2-f.offsetWidth/2)+"px":e+"px"):(t.placement==="left"||t.placement==="right")&&(f.style[a]="",f.style.top=e==="center"?Math.floor(h/2-f.offsetHeight/2)+"px":e+"px"):(f.style.top="",f.style[a]="");t.xOffset==="center"?u=i.left+l.offsetWidth/2-s/2:u+=n.getPixelValue(t.xOffset);t.yOffset==="center"?r=i.top+l.offsetHeight/2-h/2:r+=n.getPixelValue(t.yOffset);t.fixedElement||(r+=n.getScrollTop(),u+=n.getScrollLeft());o.style.position=t.fixedElement?"fixed":"absolute";o.style.top=r+"px";o.style.left=u+"px"},render:function(i,r,u){var o=this.element,e,v,y,f,h,k,d,p,a,s,w,g,b;if(i?this.currStep=i:this.currStep&&(i=this.currStep),this.opt.isTourBubble?(f=t.getCurrTour(),f&&(v=f.customData,e=f.customRenderer,i.isRtl=i.hasOwnProperty("isRtl")?i.isRtl:f.hasOwnProperty("isRtl")?f.isRtl:this.opt.isRtl,y=f.unsafe,Array.isArray(f.steps)&&(h=f.steps.length,k=this._getStepI18nNum(this._getStepNum(h-1)),p=this._getStepNum(r)===this._getStepNum(h-1)))):(v=i.customData,e=i.customRenderer,y=i.unsafe,i.isRtl=i.hasOwnProperty("isRtl")?i.isRtl:this.opt.isRtl),d=p?n.getI18NString("doneBtn"):i.showSkip?n.getI18NString("skipBtn"):n.getI18NString("nextBtn"),n.flipPlacement(i),n.normalizePlacement(i),this.placement=i.placement,s={i18n:{prevBtn:n.getI18NString("prevBtn"),nextBtn:d,closeTooltip:n.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(r)),numSteps:k},buttons:{showPrev:n.valOrDefault(i.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(r)>0,showNext:n.valOrDefault(i.showNextButton,this.opt.showNextButton),showCTA:n.valOrDefault(i.showCTAButton&&i.ctaLabel,!1),ctaLabel:i.ctaLabel,showClose:n.valOrDefault(this.opt.showCloseButton,!0)},step:{num:r,isLast:n.valOrDefault(p,!1),title:i.title||"",content:i.content||"",isRtl:i.isRtl,placement:i.placement,padding:n.valOrDefault(i.padding,this.opt.bubblePadding),width:n.getPixelValue(i.width)||this.opt.bubbleWidth,customData:i.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:h,unsafe:n.valOrDefault(y,!1),customData:v||{}}},typeof e=="function")o.innerHTML=e(s);else if(typeof e=="string"){if(!t.templates||typeof t.templates[e]!="function")throw new Error('Bubble rendering failed - template "'+e+'" is not a function.');o.innerHTML=t.templates[e](s)}else if(c)o.innerHTML=c(s);else{if(!t.templates||typeof t.templates[l]!="function")throw new Error('Bubble rendering failed - template "'+l+'" is not a function.');o.innerHTML=t.templates[l](s)}for(w=o.children,g=w.length,a=0;a<g;a++)b=w[a],n.hasClass(b,"hopscotch-arrow")&&(this.arrowEl=b);return o.style.zIndex=typeof i.zindex=="number"?i.zindex:"",this._setArrow(i.placement),this.hide(!1),this.setPosition(i),u&&u(!i.fixedElement),this},_getStepNum:function(n){for(var r=0,u,f=t.getSkippedStepsIndexes(),e=f.length,i=0;i<e;i++)u=f[i],u<n&&r++;return n-r},_getStepI18nNum:function(t){var i=n.getI18NString("stepNums");return i&&t<i.length?i[t]:t+1},_setArrow:function(t){n.removeClass(this.arrowEl,"down up right left");t==="top"?n.addClass(this.arrowEl,"down"):t==="bottom"?n.addClass(this.arrowEl,"up"):t==="left"?n.addClass(this.arrowEl,"right"):t==="right"&&n.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return this.placement==="top"?"down":this.placement==="bottom"?"up":this.placement==="left"?"right":this.placement==="right"?"left":void 0},show:function(){var t=this,i="fade-in-"+this._getArrowDirection();return n.removeClass(this.element,"hide"),n.addClass(this.element,i),setTimeout(function(){n.removeClass(t.element,"invisible")},50),setTimeout(function(){n.removeClass(t.element,i)},1e3),this.isShowing=!0,this},hide:function(t){var i=this.element;return t=n.valOrDefault(t,!0),i.style.top="",i.style.left="",t?(n.addClass(i,"hide"),n.removeClass(i,"invisible")):(n.removeClass(i,"hide"),n.addClass(i,"invisible")),n.removeClass(i,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var t=this.element;t&&t.parentNode.removeChild(t);n.removeEvtListener(t,"click",this.clickCb)},_handleBubbleClick:function(i){function f(t){return t===i.currentTarget?null:n.hasClass(t,"hopscotch-cta")?"cta":n.hasClass(t,"hopscotch-next")?"next":n.hasClass(t,"hopscotch-prev")?"prev":n.hasClass(t,"hopscotch-close")?"close":f(t.parentElement)}var r,u;if(i=i||window.event,u=i.target||i.srcElement,r=f(u),r==="cta")this.opt.isTourBubble||t.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&n.invokeCallback(this.currStep.onCTA);else if(r==="next")t.nextStep(!0);else if(r==="prev")t.prevStep(!0);else if(r==="close"){if(this.opt.isTourBubble){var e=t.getCurrStepNum(),o=t.getCurrTour(),s=e===o.steps.length-1;n.invokeEventCallbacks("close");t.endTour(!0,s)}else this.opt.onClose&&n.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?t.getCalloutManager().removeCallout(this.opt.id):this.destroy();n.evtPreventDefault(i)}},init:function(f){var o=document.createElement("div"),s=this,c=!1,a,e,l,h;this.element=o;h={showPrevButton:u.showPrevButton,showNextButton:u.showNextButton,bubbleWidth:u.bubbleWidth,bubblePadding:u.bubblePadding,arrowWidth:u.arrowWidth,isRtl:u.isRtl,showNumber:!0,isTourBubble:!0};f=(typeof f=="undefined"?"undefined":i(f))===r?{}:f;n.extend(h,f);this.opt=h;o.className="hopscotch-bubble animated";h.isTourBubble?(l=t.getCurrTour(),l&&n.addClass(o,"tour-"+l.id)):n.addClass(o,"hopscotch-callout no-number");a=function(){!c&&s.isShowing&&(c=!0,setTimeout(function(){s.setPosition(s.currStep);c=!1},100))};n.addEvtListener(window,"resize",a);this.clickCb=function(n){s._handleBubbleClick(n)};n.addEvtListener(o,"click",this.clickCb);this.hide();n.documentIsReady()?document.body.appendChild(o):(document.addEventListener?(e=function(){document.removeEventListener("DOMContentLoaded",e);window.removeEventListener("load",e);document.body.appendChild(o)},document.addEventListener("DOMContentLoaded",e,!1)):(e=function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",e),window.detachEvent("onload",e),document.body.appendChild(o))},document.attachEvent("onreadystatechange",e)),n.addEvtListener(window,"load",e))}},p=function(){var t={},i={};this.createCallout=function(r){var u;if(r.id){if(!nt.test(r.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(t[r.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!n.getStepTarget(r))throw new Error("Must specify existing target element via 'target' option.");r.showNextButton=r.showPrevButton=!1;r.isTourBubble=!1;u=new s(r);t[r.id]=u;i[r.id]=r;u.render(r,null,function(){u.show();r.onShow&&n.invokeCallback(r.onShow)})}else throw new Error("Must specify a callout id.");return u};this.getCallout=function(n){return t[n]};this.removeAllCallouts=function(){for(var n in t)t.hasOwnProperty(n)&&this.removeCallout(n)};this.removeCallout=function(n){var r=t[n];(t[n]=null,i[n]=null,r)&&r.destroy()};this.refreshCalloutPositions=function(){var n,r,u;for(n in t)t.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(r=t[n],u=i[n],r&&u&&r.setPosition(u))}},y=function(o){var yt=this,k,ft,tt,w,v,ut={},ct,it,et=[],st,rt=function(t){return k&&k.element&&k.element.parentNode||(k=new s(tt)),t&&n.extend(k.opt,{bubblePadding:y("bubblePadding"),bubbleWidth:y("bubbleWidth"),showNextButton:y("showNextButton"),showPrevButton:y("showPrevButton"),showCloseButton:y("showCloseButton"),arrowWidth:y("arrowWidth"),isRtl:y("isRtl")}),k},pt=function(){k&&(k.destroy(),k=null)},y=function(t){return typeof tt=="undefined"?u[t]:n.valOrDefault(tt[t],u[t])},b=function(){return!w||v<0||v>=w.steps.length?null:w.steps[v]},ot=function(){yt.nextStep()},wt=function(t){var tt=rt(),l=tt.element,s=n.getPixelValue(l.style.top),a=s+n.getPixelValue(l.offsetHeight),it=n.getStepTarget(b()),v=it.getBoundingClientRect(),p=v.top+n.getScrollTop(),w=v.bottom+n.getScrollTop(),e=s<p?s:p,ut=a>w?a:w,f=n.getScrollTop(),ft=f+n.getWindowHeight(),u=e-y("scrollTopMargin"),k,h,d,o,nt,c;e>=f&&(e<=f+y("scrollTopMargin")||ut<=ft)?t&&t():y("smoothScroll")?(typeof YAHOO=="undefined"?"undefined":i(YAHOO))!==r&&i(YAHOO.env)!==r&&i(YAHOO.env.ua)!==r&&i(YAHOO.util)!==r&&i(YAHOO.util.Scroll)!==r?(k=YAHOO.env.ua.webkit?document.body:document.documentElement,d=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:undefined,h=new YAHOO.util.Scroll(k,{scroll:{to:[0,u]}},y("scrollDuration")/1e3,d),h.onComplete.subscribe(t),h.animate()):g?jQuery("body, html").animate({scrollTop:u},y("scrollDuration"),t):(u<0&&(u=0),o=f>e?-1:1,nt=Math.abs(f-u)/(y("scrollDuration")/10),c=function(){var r=n.getScrollTop(),i=r+o*nt;if(o>0&&i>=u||o<0&&i<=u){i=u;t&&t();window.scrollTo(0,i);return}if(window.scrollTo(0,i),n.getScrollTop()===r){t&&t();return}setTimeout(c,10)},c()):(window.scrollTo(0,u),t&&t())},ht=function ht(t,i){var f,r,u;v+t>=0&&v+t<w.steps.length?(v+=t,r=b(),u=function(){f=n.getStepTarget(r);f?(ut[v]&&delete ut[v],i(v)):(ut[v]=!0,n.invokeEventCallbacks("error"),ht(t,i))},r.delay?setTimeout(u,r.delay):u()):i(-1)},lt=function(t,i){var o=rt(),s=this,r,u,f,e;if(o.hide(),t=n.valOrDefault(t,!0),r=b(),r.nextOnTargetClick&&n.removeEvtListener(n.getStepTarget(r),"click",ot),u=r,f=i>0?u.multipage:v>0&&w.steps[v-1].multipage,e=function(r){var e;if(r===-1)return this.endTour(!0);if(t&&(e=i>0?n.invokeEventCallbacks("next",u.onNext):n.invokeEventCallbacks("prev",u.onPrev)),r===v){if(f){vt();return}e=n.valOrDefault(e,!0);e?this.showStep(r):this.endTour(!1)}},!f&&y("skipIfNoElement"))ht(i,function(n){e.call(s,n)});else if(v+i>=0&&v+i<w.steps.length){if(v+=i,r=b(),!n.getStepTarget(r)&&!f)return n.invokeEventCallbacks("error"),this.endTour(!0,!1);e.call(this,v)}else if(v+i===w.steps.length)return this.endTour();return this},bt=function(t){var f={},i,u,r;for(i in t)t.hasOwnProperty(i)&&i!=="id"&&i!=="steps"&&(f[i]=t[i]);return st.call(this,f,!0),u=n.getState(y("cookieName")),u&&(r=u.split(":"),ct=r[0],it=r[1],r.length>2&&(et=r[2].split(",")),it=parseInt(it,10)),this},kt=function(t,i,r){var f,u;if(v=t||0,ut=i||{},f=b(),u=n.getStepTarget(f),u){r(v);return}if(!u){if(n.invokeEventCallbacks("error"),ut[v]=!0,y("skipIfNoElement")){ht(1,r);return}v=-1;r(v)}},at=function(t){function u(){r.show();n.invokeEventCallbacks("show",i.onShow)}var i=w.steps[t],r=rt(),f=n.getStepTarget(i);v!==t&&b().nextOnTargetClick&&n.removeEvtListener(n.getStepTarget(b()),"click",ot);v=t;r.hide(!1);r.render(i,t,function(t){t?wt(u):u();i.nextOnTargetClick&&n.addEvtListener(f,"click",ot)});vt()},vt=function(){var r=w.id+":"+v,i=t.getSkippedStepsIndexes();i&&i.length>0&&(r+=":"+i.join(","));n.setState(y("cookieName"),r,1)},dt=function(n){n&&this.configure(n)};this.getCalloutManager=function(){return(typeof ft=="undefined"?"undefined":i(ft))===r&&(ft=new p),ft};this.startTour=function(t,u){var s,f,h={},e=this,o,c;if(!w){if(!t)throw new Error("Tour data is required for startTour.");if(!t.id||!nt.test(t.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");w=t;bt.call(this,t)}if((typeof u=="undefined"?"undefined":i(u))!==r){if(u>=w.steps.length)throw new Error("Specified step number out of bounds.");f=u}if(!n.documentIsReady())return d=!0,this;if(typeof f=="undefined"&&w.id===ct&&(typeof it=="undefined"?"undefined":i(it))!==r){if(f=it,et.length>0)for(o=0,c=et.length;o<c;o++)h[et[o]]=!0}else f||(f=0);return kt(f,h,function(t){var i=t!==-1&&n.getStepTarget(w.steps[t]);if(!i){e.endTour(!1,!1);return}n.invokeEventCallbacks("start");s=rt();s.hide(!1);e.isActive=!0;n.getStepTarget(b())?e.showStep(t):(n.invokeEventCallbacks("error"),y("skipIfNoElement")&&e.nextStep(!1))}),this};this.showStep=function(t){var i=w.steps[t],r=v;if(!n.getStepTarget(i)){v=t;n.invokeEventCallbacks("error");v=r;return}return i.delay?setTimeout(function(){at(t)},i.delay):at(t),this};this.prevStep=function(n){return lt.call(this,n,-1),this};this.nextStep=function(n){return lt.call(this,n,1),this};this.endTour=function(t,i){var u=rt(),r;return t=n.valOrDefault(t,!0),i=n.valOrDefault(i,!0),w&&(r=b(),r&&r.nextOnTargetClick&&n.removeEvtListener(n.getStepTarget(r),"click",ot)),v=0,it=undefined,u.hide(),t&&n.clearState(y("cookieName")),this.isActive&&(this.isActive=!1,w&&i&&n.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),pt(),w=null,this};this.getCurrTour=function(){return w};this.getCurrTarget=function(){return n.getStepTarget(b())};this.getCurrStepNum=function(){return v};this.getSkippedStepsIndexes=function(){var n=[];for(var t in ut)n.push(t);return n};this.refreshBubblePosition=function(){var n=b();return n&&rt().setPosition(n),this.getCalloutManager().refreshCalloutPositions(),this};this.listen=function(n,t,i){return n&&e[n].push({cb:t,fromTour:i}),this};this.unlisten=function(n,t){for(var r=e[n],i=0,u=r.length;i<u;++i)r[i].cb===t&&r.splice(i,1);return this};this.removeCallbacks=function(n,t){var r,i,u;for(var f in e)if(!n||n===f)if(t)for(r=e[f],i=0,u=r.length;i<u;++i)r[i].fromTour&&(r.splice(i--,1),--u);else e[f]=[];return this};this.registerHelper=function(n,t){typeof n=="string"&&typeof t=="function"&&(f[n]=t)};this.unregisterHelper=function(n){f[n]=null};this.invokeHelper=function(n){for(var i=[],t=1,r=arguments.length;t<r;++t)i.push(arguments[t]);f[n]&&f[n].call(null,i)};this.setCookieName=function(n){return tt.cookieName=n,this};this.resetDefaultOptions=function(){return tt={},this};this.resetDefaultI18N=function(){return h={},this};this.getState=function(){return n.getState(y("cookieName"))};st=function(t,i){var o,u=["next","prev","start","end","show","error","close"],f,r,e;for(tt||this.resetDefaultOptions(),n.extend(tt,t),t&&n.extend(h,t.i18n),r=0,e=u.length;r<e;++r)f="on"+u[r].charAt(0).toUpperCase()+u[r].substring(1),t[f]&&this.listen(u[r],t[f],i);return o=rt(!0),this};this.configure=function(n){return st.call(this,n,!1)};this.setRenderer=function(n){var t=typeof n=="undefined"?"undefined":i(n);return t==="string"?(l=n,c=undefined):t==="function"&&(c=n),this};this.setEscaper=function(n){return typeof n=="function"&&(a=n),this};dt.call(this,o)},t=new y,function(){var n={};n.escape=function(n){return a?a(n):n==null?"":(""+n).replace(new RegExp("[&<>\"']","g"),function(n){return n=="&"?"&amp;":n=="<"?"&lt;":n==">"?"&gt;":n=='"'?"&quot;":n=="'"?"&#x27;":void 0})};this.templates=this.templates||{};this.templates.bubble_default=function(t){function s(t,i){return i?n.escape(t):t}var i,r="",c=n.escape,h=Array.prototype.join;r+="\n";var e=t.i18n,f=t.buttons,u=t.step,o=t.tour;return r+='\n<div class="hopscotch-bubble-container" style="width: '+((i=u.width)==null?"":i)+"px; padding: "+((i=u.padding)==null?"":i)+'px;">\n  ',o.isTour&&(r+='<span class="hopscotch-bubble-number">'+((i=e.stepNum)==null?"":i)+"<\/span>"),r+='\n  <div class="hopscotch-bubble-content">\n    ',u.title!==""&&(r+='<h3 class="hopscotch-title">'+((i=s(u.title,o.unsafe))==null?"":i)+"<\/h3>"),r+="\n    ",u.content!==""&&(r+='<div class="hopscotch-content">'+((i=s(u.content,o.unsafe))==null?"":i)+"<\/div>"),r+='\n  <\/div>\n  <div class="hopscotch-actions">\n    ',f.showPrev&&(r+='<button class="hopscotch-nav-button prev hopscotch-prev">'+((i=e.prevBtn)==null?"":i)+"<\/button>"),r+="\n    ",f.showCTA&&(r+='<button class="hopscotch-nav-button next hopscotch-cta">'+((i=f.ctaLabel)==null?"":i)+"<\/button>"),r+="\n    ",f.showNext&&(r+='<button class="hopscotch-nav-button next hopscotch-next">'+((i=e.nextBtn)==null?"":i)+"<\/button>"),r+="\n  <\/div>\n  ",f.showClose&&(r+='<button class="hopscotch-bubble-close hopscotch-close">'+((i=e.closeTooltip)==null?"":i)+"<\/button>"),r+='\n<\/div>\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\n  <div class="hopscotch-bubble-arrow-border"><\/div>\n  <div class="hopscotch-bubble-arrow"><\/div>\n<\/div>\n'}}.call(t),t});